<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 00, Vignette 5: Simulate an FROC split-plot datafile • RJafroc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Chapter 00, Vignette 5: Simulate an FROC split-plot datafile">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RJafroc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Ch00Vig1DataFormatRoc.html">Chapter 00, Vignette 1: JAFROC Excel file data format: ROC CROSSED</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig2DataFormatFroc.html">Chapter 00, Vignette 2: JAFROC Excel file data format: FROC CROSSED</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig3DataFormatRocSp.html">Chapter 00, Vignette 3: JAFROC Excel file data format: ROC SPLIT-PLOT</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig4DataFormatFrocSp.html">Chapter 00, Vignette 4: JAFROC Excel file data format: FROC SPLIT-PLOT</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig5SimulateSplitPlotDataset.html">Chapter 00, Vignette 5: Simulate an FROC split-plot datafile</a>
    </li>
    <li>
      <a href="../articles/Ch10Vig1QuickStartDBMH.html">Chapter 10, Vignette 1: Quick Start: Running DBMH-ORH analysis</a>
    </li>
    <li>
      <a href="../articles/Ch10Vig2QuickStartDBMHExcel.html">Chapter 10, Vignette 2: Quick Start DBMH-ORH Analysis with Excel Output</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig1SampleSize.html">Chapter 11, Vignette 1: Background on the F distribution</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig2SampleSize.html">Chapter 11, Vignette 2: ROC-DBMH sample size from first principles</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig3SampleSize.html">Chapter 11, Vignette 3: RJafroc functions for ROC sample size estimation using DBMH method</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig4SampleSize.html">Chapter 11, Vignette 4: RJafroc functions for ROC sample size estimation using ORH method</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig5SampleSize.html">Chapter 11, Vignette 5: On choosing a realistic effect size</a>
    </li>
    <li>
      <a href="../articles/Ch17Vig1PlotRsmOpCh.html">Chapter 17, Vignette 1: RSM predicted operating characteristics: lesDist and lesWghtDistr</a>
    </li>
    <li>
      <a href="../articles/Ch19Vig1FrocSampleSize.html">Chapter 19, Vignette 1: FROC sample size estimation and comparison to ROC</a>
    </li>
    <li>
      <a href="../articles/Ch19Vig2FrocSampleSize.html">Chapter 19, Vignette 2: FROC sample size estimation using specified ROC effect size</a>
    </li>
    <li>
      <a href="../articles/Ch20Vig1improperROCs.html">Chapter 20, Vignette 1: Improper ROCs</a>
    </li>
    <li>
      <a href="../articles/Ch20Vig2degenerateROCs.html">Chapter 20, Vignette 2: Degenerate datasets in the binormal model</a>
    </li>
    <li>
      <a href="../articles/Ch20Vig3proprocROCs.html">Chapter 20, Vignette 3: PROPROC ROCs and pdfs</a>
    </li>
    <li>
      <a href="../articles/Ch20Vig4metzEqn36.html">Chapter 20, Vignette 4: Metz Eqn36 numerical check</a>
    </li>
    <li>
      <a href="../articles/Ch20Vig5cbmPlots.html">Chapter 20, Vignette 5: CBM plots</a>
    </li>
    <li>
      <a href="../articles/Ch30Vig1RoiParadigm.html">Chapter 30, Vignette 1: Analyzing data acquired according to the ROI paradigm</a>
    </li>
    <li>
      <a href="../articles/Ch30Vig2RoiParadigmSt.html">Chapter 30, Vignette 2: Significance testing for the ROI paradigm</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Chapter 00, Vignette 5: Simulate an FROC split-plot datafile</h1>
                        <h4 class="author">Dev P. Chakraborty, PhD</h4>
            
            <h4 class="date">2020-03-10</h4>
      
      
      <div class="hidden name"><code>Ch00Vig5SimulateSplitPlotDataset.Rmd</code></div>

    </div>

    
    
<div id="this-vignette-is-under-construction" class="section level2">
<h2 class="hasAnchor">
<a href="#this-vignette-is-under-construction" class="anchor"></a>This vignette is under construction!!</h2>
<ul>
<li>This is a follow-up on the recently added (v1.3.1) capability to read a split-plot dataset.</li>
<li>Lacking an actual split-plot dataset to test the routines, I decided to simulate one.</li>
<li>The simulated dataset is of dataType FROC and the number of cases interpreted by each reader is reader-dependent.</li>
<li>This makes it <em>really</em> exercise the validity of the <code>DfReadDataFile</code> function.</li>
<li>In my experience, the <code>dataset$truthTableStr</code> member is invaluable in catching data entry errors so much of this vignette focuses on it.</li>
</ul>
</div>
<div id="the-starting-point-is-an-actual-crossed-froc-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#the-starting-point-is-an-actual-crossed-froc-dataset" class="anchor"></a>The starting point is an actual crossed FROC dataset</h2>
<p>The example shown below begins with the Excel file <code>inst/extdata/FrocData.xlsx</code> in the project directory (this corresponds to the 5-modality FED dataset <code>dataseet04</code> <span class="citation">(Zanca et al. 2009)</span> with modalities 1, 2 and 3 removed). The first statement retrieves the name of the data file, located in a hidden directory that one need not be concerned with. The second statement reads the file using <code><a href="../reference/DfReadDataFile.html">DfReadDataFile()</a></code> and saves it to object <code>x1</code>. The next statement extracts the <code>truthTableStr</code> list member, saves it to <code>t1</code> and shows its structure.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">fed &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"FrocData.xlsx"</span>,</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">                       <span class="dt">package =</span> <span class="st">"RJafroc"</span>, <span class="dt">mustWork =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">x1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DfReadDataFile.html">DfReadDataFile</a></span>(fed, <span class="dt">newExcelFileFormat =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">t1 &lt;-<span class="st"> </span>x1<span class="op">$</span>truthTableStr</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(t1)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;  num [1:2, 1:4, 1:200, 1:4] 1 1 1 1 1 1 1 1 1 1 ...</span></a></code></pre></div>
<ul>
<li>There are 100 normal and 100 abnormal cases in this two-modality four-reader crossed dataset.</li>
<li>Note that <code>t1</code> is the original crossed dataset <code>truthTableStr</code>.</li>
<li>Recall from earlier vignette that for the fourth subscript of <code>t1</code> the value 1 applies to cases with no lesions (normals), value 2 applies to cases with one lesion, value 3 applies to cases with two lesions and 4 applies to cases with three lesions.</li>
<li>The value for any allowed interpretation is 1 and otherwise it is <code>NA</code>.</li>
</ul>
</div>
<div id="understanding-truthtablestr-object-t1" class="section level2">
<h2 class="hasAnchor">
<a href="#understanding-truthtablestr-object-t1" class="anchor"></a>Understanding <code>truthTableStr</code> object <code>t1</code>
</h2>
<ul>
<li>The following line yields 200 (=2*100) as reader 1 (second subscript) provides interpretations in both modalities (first subscript is blank meaning both modalities) for all 100 normal cases (third subscript is 1:100 and fourth subscript is 1) and therefore each of these interpretations yields a <code>TRUE</code> (i.e., 1).</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; [1] 200</span></a></code></pre></div>
<ul>
<li>The following line yields 0 as the third subscript is 1:100, implying normal cases, but the fourth subscript is 2:4, implyng abnormal cases and therefore each of these interpretations yields an NA and <code>!is.na(NA)</code> equals <code>FALSE</code> (i.e., zero).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]))</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
<ul>
<li>The following line also yields 800 (=2x4x100) as readers 1:4 provide interpretations in both modalities for all normal cases and each interpretation yields a 1.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,,<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; [1] 800</span></a></code></pre></div>
<ul>
<li>The following line yields 200 (=2*100) because the fourth subscript (2) applies to abnormal cases with at least one lesion, and each abnormal case is guaranteed to have at least one lesion (i.e., a 1 entry in the <code>LesionID</code> column of the Excel Truth worksheet) and each of these interpretations yields a 1.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,<span class="dv">1</span>,<span class="dv">101</span><span class="op">:</span><span class="dv">200</span>,<span class="dv">2</span>]))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; [1] 200</span></a></code></pre></div>
<ul>
<li>The following line yields 62 (=2x31) because the fourth subscript (3) applies to abnormal cases with at least two lesions, and inspection of the <code>LesionID</code> column in the original Excel file reveals that 31 abnormal cases have two lesions.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,<span class="dv">1</span>,<span class="dv">101</span><span class="op">:</span><span class="dv">200</span>,<span class="dv">3</span>]))</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; [1] 62</span></a></code></pre></div>
<ul>
<li>The following line yields 22 (=2x11) because the fourth subscript (4) applies to abnormal cases with three lesions. Inspection of the <code>LesionID</code> column reveals that 11 abnormal cases have three lesions.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[,<span class="dv">1</span>,<span class="dv">101</span><span class="op">:</span><span class="dv">200</span>,<span class="dv">4</span>]))</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] 22</span></a></code></pre></div>
<ul>
<li>The following line yields 242 (=200+31+11), the number of rows in the <code>Truth</code> worksheet.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t1[<span class="dv">1</span>,<span class="dv">1</span>,,]))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; [1] 242</span></a></code></pre></div>
</div>
<div id="modify-a-crossed-froc-workbook-to-simulate-a-split-plot-froc-design" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-a-crossed-froc-workbook-to-simulate-a-split-plot-froc-design" class="anchor"></a>Modify a crossed FROC workbook to simulate a split-plot FROC design</h2>
<ul>
<li>We create a simulated split-plot FROC dataset starting from a crossed FROC dataset.</li>
<li>The basic idea is to modify interpretations that do not belong to a specified split-plot design.</li>
<li>This was done (one could say the “hard way”) by manually making apppropriate changes to <code>inst/extdata/FrocData.xlsx</code> and saving the results to <code>inst/extdata/toyFiles/FROC/FrocDataSpVaryK1K2.xlsx</code>. The filename is intended to emphasize that the numbers of normal and abnormal cases can be reader-dependent, as long as they individually add up to 100.</li>
<li>We divided the 100 normal and 100 abnormal cases into 4 groups of normal and abnormal cases, where each group is interpreted by one reader only.</li>
<li>The first groups of cases, interpreted by reader 1 (label “1”), consists of 23 normal (case labels “100:122”) and 24 abnormal (case labels “0:23”) cases.</li>
<li>The second groups of cases, interpreted by reader 2 (label “3”), consists of 27 normal (case labels “123:149”) and 26 abnormal (case labels “24:49”) cases.</li>
<li>The third groups of cases, interpreted by reader 3 (label “4”), consists of 22 normal (case labels “150:171”) and 23 abnormal (case labels “51:73”) cases.</li>
<li>The fourth groups of cases, interpreted by reader 4 (label “5”), consists of 28 normal (case labels “172:199”) and 27 abnormal (case labels c(“50,74:99”)) cases.</li>
</ul>
<div class="figure" style="text-align: center">
<img src="images/frocData.png" alt="Fig. 1 Truth worksheets; (a) LEFT=FrocData.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2.xlsx, modified split-plot dataset" width="50%" height="20%"><img src="images/frocDataSpVaryK1K2.png" alt="Fig. 1 Truth worksheets; (a) LEFT=FrocData.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2.xlsx, modified split-plot dataset" width="50%" height="20%"><p class="caption">
Fig. 1 Truth worksheets; (a) LEFT=FrocData.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2.xlsx, modified split-plot dataset
</p>
</div>
<ul>
<li>The above figure shows that the <code>ReaderID</code> column for cases <code>0:23</code> has been replaced with a 1, meaning that only reader 1 interprets these cases in both modalities. This yields 24 abnormal cases for reader 1 in each modality. Normal cases for this reader are <code>100:122</code>.</li>
<li>Not shown above: <strong>all interpretations by reader 1 occurring for cases outside of <code>0:23</code> and <code>100:122</code> in the other two worksheets (<code>TP</code> and <code>FP</code>) are deleted</strong>.</li>
<li>The <code>ReaderID</code> column for cases <code>24:49</code> are replaced by 3, corresponding to the second reader. All interpretations by this reader for cases outside of <code>24:49</code> in the other two worksheets are deleted. Normal cases for this reader are <code>123:149</code> and observations outside of this range in the <code>TP</code> and <code>FP</code> worsheets are deleted.</li>
<li>The <code>ReaderID</code> column for cases <code>51:73</code> are replaced by 4, corresponding to the third reader. All interpretations by this reader for cases outside of <code>51:73</code> in the other two worksheets are deleted. Normal cases for this reader are <code>150:171</code> and observations outside of this range in the <code>TP</code> and <code>FP</code> worsheets are deleted.</li>
<li>The <code>ReaderID</code> column for cases <code>50</code> and <code>74:79</code> are replaced by 5, corresponding to the fourth reader. All interpretations by this reader for cases outside of the specified range in the other two worksheets are deleted. Normal cases for this reader are <code>172:199</code> and observations outside of this range in the <code>TP</code> and <code>FP</code> worsheets are deleted. <!-- * The modifed file is saved to `extdata/toyFiles/FROC/FrocDataSpVaryK1K2.xlsx`. -->
</li>
<li>The modified file is read by the code chunk below. The read function explicitly tests that observations outside of the specified ranges in the <code>Truth</code> sheet are not present in the other two worksheets.</li>
</ul>
</div>
<div id="example-of-deletion-of-interpretations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-of-deletion-of-interpretations" class="anchor"></a>Example of deletion of interpretations</h2>
<div class="figure" style="text-align: center">
<img src="images/frocDataFP.png" alt="Fig. 1 FP worksheets; (a) LEFT=FrocDataFP.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2FP.xlsx, modified split-plot dataset" width="50%" height="20%"><img src="images/frocDataSpVaryK1K2FP.png" alt="Fig. 1 FP worksheets; (a) LEFT=FrocDataFP.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2FP.xlsx, modified split-plot dataset" width="50%" height="20%"><p class="caption">
Fig. 1 FP worksheets; (a) LEFT=FrocDataFP.xlsx, original crossed dataset; (b) RIGHT=FrocDataSpVaryK1K2FP.xlsx, modified split-plot dataset
</p>
</div>
<ul>
<li>The two figures above illustrate deletion of interpretations.</li>
<li>The left panel shows the <code>FP</code> worksheet for the original crossed data.</li>
<li>For reader 1 and modality 4 it contains cases 29, 30, 44, …, 91, 96 that do not belong to the split-plot dataset for this reader.</li>
<li>Specifically, they are outside of <code>0:23</code> and <code>100:122</code>, the allowed ranges for this reader.</li>
<li>These are deleted, see right panel of above figure. The next allowed cases for this reader are <code>107, 109,...., 122</code>.</li>
<li>The procedure is repeated for all readers and both <code>TP</code> and <code>FP</code> sheets.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">fedsp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"toyFiles/FROC/FrocDataSpVaryK1K2.xlsx"</span>,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                       <span class="dt">package =</span> <span class="st">"RJafroc"</span>, <span class="dt">mustWork =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">x2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DfReadDataFile.html">DfReadDataFile</a></span>(fedsp, <span class="dt">newExcelFileFormat =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">t2 &lt;-<span class="st"> </span>x2<span class="op">$</span>truthTableStr</a></code></pre></div>
</div>
<div id="understanding-truthtablestr-object-t2" class="section level2">
<h2 class="hasAnchor">
<a href="#understanding-truthtablestr-object-t2" class="anchor"></a>Understanding <code>truthTableStr</code> object <code>t2</code>
</h2>
<ul>
<li>The following line below yields 46 (= 2x23) as reader 1 (second subscript) provides interpretations in both modalities (first subscript is blank) for all normal cases (third subscript is 1:100 and fourth subscript is 1) and there are 23 normal cases interpreted by reader 1.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t2[,<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; [1] 46</span></a></code></pre></div>
<ul>
<li>The following line confirms the first line, with a 1 contribution coming from each case in range 1:23.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t2[,<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">23</span>,<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; [1] 46</span></a></code></pre></div>
<ul>
<li>The following line yields 48 (= 2x24) because the fourth subscript (2) applies to abnormal cases with at least one lesion, and we know that this reader has interpreted 24 abnormal cases.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t2[,<span class="dv">1</span>,<span class="dv">101</span><span class="op">:</span><span class="dv">124</span>,<span class="dv">2</span>]))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; [1] 48</span></a></code></pre></div>
<ul>
<li>The following line yields 54 (= 2x27) because the fourth subscript (1) applies to normal cases and we know that reader 2 has interpreted 27 normal cases.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t2[,<span class="dv">2</span>,,<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] 54</span></a></code></pre></div>
<ul>
<li>The following line yields 52 (= 2x26) because the fourth subscript (2:4) applies to abnormal cases with at least one lesion, and we know that reader 2 has interpreted 26 abnormal cases.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(t2[,<span class="dv">2</span>,,<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; [1] 52</span></a></code></pre></div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-RN1882">
<p>Zanca, Federica, Jurgen Jacobs, Chantal Van Ongeval, Filip Claus, Valerie Celis, Catherine Geniets, Veerle Provost, Herman Pauwels, Guy Marchal, and Hilde Bosmans. 2009. “Evaluation of Clinical Image Processing Algorithms Used in Digital Mammography.” Journal Article. <em>Medical Physics</em> 36 (3): 765–75.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#this-vignette-is-under-construction">This vignette is under construction!!</a></li>
      <li><a href="#the-starting-point-is-an-actual-crossed-froc-dataset">The starting point is an actual crossed FROC dataset</a></li>
      <li><a href="#understanding-truthtablestr-object-t1">Understanding <code>truthTableStr</code> object <code>t1</code></a></li>
      <li><a href="#modify-a-crossed-froc-workbook-to-simulate-a-split-plot-froc-design">Modify a crossed FROC workbook to simulate a split-plot FROC design</a></li>
      <li><a href="#example-of-deletion-of-interpretations">Example of deletion of interpretations</a></li>
      <li><a href="#understanding-truthtablestr-object-t2">Understanding <code>truthTableStr</code> object <code>t2</code></a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dev Chakraborty, Peter Philips, Xuetong Zhai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
