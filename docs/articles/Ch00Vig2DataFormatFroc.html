<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 00, Vignette 2: JAFROC Excel file data format: FROC CROSSED • RJafroc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Chapter 00, Vignette 2: JAFROC Excel file data format: FROC CROSSED">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RJafroc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Ch00Vig1DataFormatRoc.html">Chapter 00, Vignette 1: JAFROC Excel file data format: ROC CROSSED</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig2DataFormatFroc.html">Chapter 00, Vignette 2: JAFROC Excel file data format: FROC CROSSED</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig3DataFormatRocSp.html">Chapter 00, Vignette 3: JAFROC Excel file data format: ROC SPLIT-PLOT</a>
    </li>
    <li>
      <a href="../articles/Ch00Vig4DataFormatFrocSp.html">Chapter 00, Vignette 4: JAFROC Excel file data format: FROC SPLIT-PLOT</a>
    </li>
    <li>
      <a href="../articles/Ch10V1QuickStartDBMH.html">Chapter 10, Vignette 1: Quick Start: Running DBMH-ORH analysis</a>
    </li>
    <li>
      <a href="../articles/Ch10V2QuickStartDBMHExcel.html">Chapter 10, Vignette 2: Quick Start DBMH-ORH Analysis with Excel Output</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig1SampleSize.html">Chapter 11, Vignette 1: Background on the F distribution</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig2SampleSize.html">Chapter 11, Vignette 2: ROC-DBMH sample size from first principles</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig3SampleSize.html">Chapter 11, Vignette 3: RJafroc functions for ROC sample size estimation using DBMH method</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig4SampleSize.html">Chapter 11, Vignette 4: RJafroc functions for ROC sample size estimation using ORH method</a>
    </li>
    <li>
      <a href="../articles/Ch11Vig5SampleSize.html">Chapter 11, Vignette 5: On choosing a realistic effect size</a>
    </li>
    <li>
      <a href="../articles/Ch19Vig1FrocSampleSize.html">Chapter 19, Vignette 1: FROC sample size estimation and comparison to ROC</a>
    </li>
    <li>
      <a href="../articles/Ch19Vig2FrocSampleSize.html">Chapter 19, Vignette 2: FROC sample size estimation using specified ROC effect size</a>
    </li>
    <li>
      <a href="../articles/Ch20V1improperROCs.html">Chapter 20, Vignette 1: Improper ROCs</a>
    </li>
    <li>
      <a href="../articles/Ch20V2degenerateROCs.html">Chapter 20, Vignette 2: Degenerate datasets in the binormal model</a>
    </li>
    <li>
      <a href="../articles/Ch20V3proprocROCs.html">Chapter 20, Vignette 3: PROPROC ROCs and pdfs</a>
    </li>
    <li>
      <a href="../articles/Ch20V4metzEqn36.html">Chapter 20, Vignette 4: Metz Eqn36 numerical check</a>
    </li>
    <li>
      <a href="../articles/Ch20V5cbmPlots.html">Chapter 20, Vignette 5: CBM plots</a>
    </li>
    <li>
      <a href="../articles/Ch30V1RoiParadigm.html">Chapter 30, Vignette 1: Analyzing data acquired according to the ROI paradigm</a>
    </li>
    <li>
      <a href="../articles/Ch30V2RoiParadigmSt.html">Chapter 30, Vignette 2: Significance testing for the ROI paradigm</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Chapter 00, Vignette 2: JAFROC Excel file data format: FROC CROSSED</h1>
                        <h4 class="author">Dev P. Chakraborty, PhD</h4>
            
            <h4 class="date">2019-12-06</h4>
      
      
      <div class="hidden name"><code>Ch00Vig2DataFormatFroc.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<ul>
<li>The purpose of this vignette is to explain the data format of the input Excel file for FROC datasets.</li>
<li>In the Free-response Receiver Operating Characteristic (FROC) paradigm {<span class="citation">(Bunch et al. 1978)</span> and <span class="citation">(Chakraborty 2017)</span>} the observer searches each image for signs of <strong>localized disease</strong> and marks and rates localized regions that are sufficiently suspicious for disease presence.</li>
<li>FROC data consists of <strong>mark-rating pairs</strong>, where each mark is a localized-region that was considered sufficiently suspicious for presence of a localized lesion and the rating is the corresponding confidence level.</li>
<li>By adopting a proximity criterion, each mark is classified by the investigator as a lesion localization (<code>LL</code>) - if it is close to a real lesion - or a non-lesion localization (<code>NL</code>) otherwise.</li>
<li>The observer assigns a rating to each region. The rating, as in the ROC paradigm, can be an integer or quasi-continuous (e.g., 0 – 100), or a floating point value, as long as higher numbers represent greater confidence in presence of a lesion at the indicated region.</li>
</ul>
</div>
<div id="the-excel-data-format" class="section level2">
<h2 class="hasAnchor">
<a href="#the-excel-data-format" class="anchor"></a>The Excel data format</h2>
<p>The Excel file has three worsheets. These are named <code>Truth</code>, <code>NL</code> or <code>FP</code> and <code>LL</code> or <code>TP</code>.</p>
</div>
<div id="the-truth-worksheet" class="section level2">
<h2 class="hasAnchor">
<a href="#the-truth-worksheet" class="anchor"></a>The <code>Truth</code> worksheet</h2>
<p>The <code>Truth</code> worksheet contains 6 columns: <code>CaseID</code>, <code>LesionID</code>, <code>Weight</code>, <code>ReaderID</code>, <code>ModalityID</code> and <code>Paradigm</code>.</p>
<ul>
<li>The first five columns contain <strong>at least</strong> as many rows as there are cases (images) in the dataset.</li>
<li>
<code>CaseID</code>: unique <strong>integers</strong>, one per case, representing the cases in the dataset.</li>
<li>
<code>LesionID</code>: integers 0, 1, 2, etc., with each 0 representing a non-diseased case, 1 representing the <em>first</em> lesion on a diseased case, 2 representing the second lesion on a diseased case, if present, and so on.</li>
<li>The non-diseased cases are labeled <code>1</code>, <code>2</code> and <code>3</code>, while the diseased cases are labeled <code>70</code>, <code>71</code>, <code>72</code>, <code>73</code> and <code>74</code>.</li>
<li>
<code>Weight</code>: floating point; 0, for each non-diseased case, or values for each diseased case that add up to unity.<br>
</li>
<li>Diseased case <code>70</code> has two lesions, with <code>LesionID</code>s 1 and 2, and weights 0.3 and 0.7. Diseased case <code>71</code> has one lesion, with LesionID 1, and weight 1. Diseased case <code>72</code> has three lesions, with <code>LesionID</code>s 1, 2 and 3 and weights 1/3 each. Diseased case <code>73</code> has two lesions, with <code>LesionID</code>s 1, and 2 and weights 0.1 and 0.9. Diseased case <code>74</code> has one lesion, with <code>LesionID</code> 1 and weight 1.</li>
<li>
<code>ReaderID</code>: a comma-separated listing of readers, each represented by a unique <strong>integer</strong>, that have interpreted the case. In the example shown below each cell has the value <code>0, 1, 2</code>. <strong>Each cell has to be text formatted.</strong>
</li>
<li>
<code>ModalityID</code>: a comma-separated listing of modalities (or treatments), each represented by a unique <strong>integer</strong>, that apply to each case. In the example each cell has the value <code>0, 1</code>. <strong>Each cell has to be text formatted.</strong>
</li>
<li>
<code>Paradigm</code>: In the example shown below, the contents are <code>FROC</code> and <code>crossed</code>. It informs the software that this is an FROC dataset, and the design is crossed.</li>
</ul>
<p><img src="images/frocCrTruth.png" style="width:100.0%"></p>
</div>
<div id="the-structure-of-an-froc-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#the-structure-of-an-froc-dataset" class="anchor"></a>The structure of an FROC dataset</h2>
<p>The example shown above corresponds to Excel file <code>inst/extdata/toyFiles/FROC/frocCr.xlsx</code> in the project directory.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">frocCr &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"toyFiles/FROC/frocCr.xlsx"</span>,</a>
<a class="sourceLine" id="cb1-2" title="2">                        <span class="dt">package =</span> <span class="st">"RJafroc"</span>, <span class="dt">mustWork =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-3" title="3">x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DfReadDataFile.html">DfReadDataFile</a></span>(frocCr, <span class="dt">newExcelFileFormat =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(x)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; List of 8</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt;  $ NL          : num [1:2, 1:3, 1:8, 1:2] 2.17 -Inf 2.21 -Inf -Inf ...</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt;  $ LL          : num [1:2, 1:3, 1:5, 1:3] 5.28 -Inf -Inf -Inf -Inf ...</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt;  $ lesionVector: int [1:5] 2 1 3 2 1</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt;  $ lesionID    : num [1:5, 1:3] 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;  $ lesionWeight: num [1:5, 1:3] 0.3 1 0.333 0.1 1 ...</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt;  $ dataType    : chr "FROC"</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt;  $ modalityID  : Named chr [1:2] "0" "1"</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt;   ..- attr(*, "names")= chr [1:2] "0" "1"</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt;  $ readerID    : Named chr [1:3] "0" "1" "2"</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt;   ..- attr(*, "names")= chr [1:3] "0" "1" "2"</span></a></code></pre></div>
<ul>
<li>Flag <code>newExcelFileFormat</code> is set to <code>TRUE</code> as otherwise columns D - F are ignored and the dataset is assumed to be crossed, with paradigm automatically determined from the contents of the FP and TP worksheets, FROC in the current example.</li>
<li>Flag <code>newExcelFileFormat = FALSE</code> is for compatibility with older JAFROC format Excel files, which did not have these columns.</li>
<li>The dataset object <code>x</code> is a <code>list</code> variable with 8 members.</li>
<li>The <code>dataType</code> member indicates that this is an FROC dataset.</li>
<li>There are 5 diseased cases in the dataset (the number of 1’s in the <code>LesionID</code> column of the <code>Truth</code> worksheet).</li>
<li>The <code>lesionVector</code> member is a vector whose contents reflect the number of lesions in each diseased case, i.e., 2, 1, 3, 2, 1 in the current example.</li>
<li>The <code>lesionID</code> member indicates the labeling of the lesions in each diseased case.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">x<span class="op">$</span>lesionID</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt;      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; [1,]    1    2 -Inf</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; [2,]    1 -Inf -Inf</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; [3,]    1    2    3</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; [4,]    1    2 -Inf</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; [5,]    1 -Inf -Inf</span></a></code></pre></div>
<ul>
<li>This shows that the lesions on the first diseased case are labeled 1 and 2. The <code>-Inf</code> is a filler used to denote a missing value. The second diseased case has one lesion labeled 1. The third diseased case has three lesions labeled 1, 2 and 3, etc.</li>
<li>The <code>lesionWeight</code> member is the clinical importance of each lesion.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">x<span class="op">$</span>lesionWeight</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt;           [,1]      [,2]      [,3]</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; [1,] 0.3000000 0.7000000      -Inf</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; [2,] 1.0000000      -Inf      -Inf</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; [3,] 0.3333333 0.3333333 0.3333333</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; [4,] 0.1000000 0.9000000      -Inf</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; [5,] 1.0000000      -Inf      -Inf</span></a></code></pre></div>
<ul>
<li>The first diseased case has two lesions, the first has weight 0.3 and the second has weight 0.7. The second diseased case has one lesion with weight 1.The third diseased case has three equally weighted lesions, each with weight 1/3. Etc.</li>
<li>There are 3 non-diseased cases in the dataset (the number of 0’s in the <code>LesionID</code> column).</li>
<li>There are 3 readers in the dataset (each cell in the <code>ReaderID</code> column contains <code>0, 1, 2</code>).</li>
<li>There are 2 modalities in the dataset (each cell in the <code>ModalityID</code> column contains <code>0, 1</code>).</li>
</ul>
</div>
<div id="the-false-positive-fp-ratings" class="section level2">
<h2 class="hasAnchor">
<a href="#the-false-positive-fp-ratings" class="anchor"></a>The false positive (FP) ratings</h2>
<p>These are found in the <code>FP</code> or <code>NL</code> worksheet, see below. <img src="images/frocCrNL.png" style="width:100.0%"></p>
<ul>
<li>It consists of 4 columns, of equal length. <strong>The common length is unpredictable.</strong> It could be zero if the dataset has no NL marks (a distinct possibility if the lesions are very easy to find and the modality and/or observer has high performance). All one knows is that the common length is an integer greater than or equal to zero.</li>
<li>In the example dataset, the common length is 10.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(x<span class="op">$</span>NL <span class="op">!=</span><span class="st"> </span><span class="op">-</span><span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
<ul>
<li>
<code>ReaderID</code>: the reader labels: these must be from <code>0</code>, <code>1</code>, or <code>2</code>, as declared in the <code>Truth</code> worksheet.</li>
<li>
<code>ModalityID</code>: the modality labels: <code>0</code> and <code>1</code>, as declared in the <code>Truth</code> worksheet.</li>
<li>
<code>CaseID</code>: the labels of cases with <code>NL</code> marks. In the FROC paradigm, <code>NL</code> events can occur on non-diseased <strong>and</strong> diseased cases.</li>
<li>
<code>FP_Rating</code>: the floating point ratings of <code>NL</code> marks. Each row of this worksheet yields a rating corresponding to the values of ReaderID, ModalityID and CaseID for that row.</li>
<li>For <code>ModalityID</code> 0, <code>ReaderID</code> 0 and <code>CaseID</code> 1 (the first non-diseased case declared in the <code>Truth</code> worksheet), there is a single <code>NL</code> mark that was rated 2.17, corresponding to row 2 of the <code>FP</code> worksheet.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">x<span class="op">$</span>NL[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; [1] 2.17</span></a></code></pre></div>
<ul>
<li>Diseased cases with <code>NL</code> marks are declared in the <code>FP</code> worksheet. Two examples are seen at rows 10 and 11 of the <code>FP</code> worksheet. For row 10, which corresponds to the first diseased case, and <code>ReaderID</code> 1 and <code>ModalityID</code> 1, the rating is 3.18.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">x<span class="op">$</span>NL[<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#&gt; [1] 3.18</span></a></code></pre></div>
<ul>
<li>In the above code the modality index is 2 as <code>ModalityID</code> equal to <code>1</code> corresponds to the second modality, etc. The case index is 4 since there are 3 non-diseased cases that occupy the first three indices, which means that the first diseased case <code>NL</code> rating is to be found at case index 4.</li>
<li>Likewise, the rating of the single NL mark on <code>CaseID</code> 74 will be found in case index 8, as shown below:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">x<span class="op">$</span>NL[<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&gt; [1] 1.9</span></a></code></pre></div>
<ul>
<li>The highlighted cells in the above image shows that one image got two <code>NL</code> marks. This explains the fourth dimension of the <code>x$NL</code> list member.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">x<span class="op">$</span>NL[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; [1] 2.24 1.78</span></a></code></pre></div>
<ul>
<li>This image got two NL marks, rated 2.24 and 1.78.</li>
<li>That this is the <em>only</em> image with two marks determines the length of the fourth dimension of the <code>x$NL</code> list member. Absent this image, the length would have been one.</li>
<li>In general, the image with the most <code>NL</code> marks determines the length of the fourth dimension of the <code>x$NL</code> list member.</li>
</ul>
</div>
<div id="the-true-positive-tp-ratings" class="section level2">
<h2 class="hasAnchor">
<a href="#the-true-positive-tp-ratings" class="anchor"></a>The true positive (TP) ratings</h2>
<p>These are found in the <code>TP</code> or <code>LL</code> worksheet, see below.</p>
<p><img src="images/frocCrLL.png" style="width:100.0%"></p>
<ul>
<li>This worksheet can only have diseased cases. The presence of a non-diseased case in this worksheet will generate an error.</li>
<li>Again, the common vertical length, 10 in this example, is a-priori unpredictable. Given the structure of the <code>Truth</code> worsheet for this dataset, the maximum length would be 9 times 2 times 3, assuming every lesion is marked (for each modality, reader and diseased case). The 9 comes from the total number of non-zero entries in the <code>LesionID</code> column of the <code>Truth</code> worksheet.</li>
<li>The fact that the length is smaller than the maximum length means that there are combinations of modality, reader and diseased cases on which some lesions were not marked.</li>
<li>As an example, the solitary lesion of <code>CaseID</code> equal to <code>70</code> was marked (and rated 5.28) in <code>ModalityID</code> <code>0</code> and <code>ReaderID</code> <code>0</code>, but not in <code>ModalityID</code> <code>1</code> and <code>ReaderID</code> <code>0</code>.</li>
<li>The length of the fourth dimension of the <code>x$LL</code> list member, 3 in the present example, is determined by the diseased case with the most lesions in the <code>Truth</code> worksheet.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">x<span class="op">$</span>LL[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#&gt; [1] 5.28</span></a>
<a class="sourceLine" id="cb9-3" title="3">x<span class="op">$</span>LL[<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt; [1] -Inf</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(x<span class="op">$</span>LL[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,])</a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt; [1] 3</span></a></code></pre></div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<ul>
<li>The FROC dataset has far less regularity in structure as compared to an ROC dataset.</li>
<li>The length of the first dimension of either <code>x$NL</code> or <code>x$LL</code> list members is the total number of modalities, 2 in the current example.</li>
<li>The length of the second dimension of either <code>x$NL</code> or <code>x$LL</code> list members is the total number of readers, 3 in the current example.</li>
<li>The length of the third dimension of <code>x$NL</code> is the total number of cases, 8 in the current example. The first three positions account for <code>NL</code> marks on non-diseased cases and the remaining 5 positions account for <code>NL</code> marks on diseased cases.</li>
<li>The length of the third dimension of <code>x$LL</code> is the total number of diseased cases, 5 in the current example.</li>
<li>The length of the fourth dimension of <code>x$NL</code> is determined by the case (diseased or non-diseased) with the most <code>NL</code> marks, 2 in the current example.</li>
<li>The length of the fourth dimension of <code>x$LL</code> is determined by the diseased case with the most lesions, 3 in the current example.</li>
</ul>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-RN2453">
<p>Bunch, PC, JF Hamilton, GK Sanderson, and AH Simmons. 1978. “Free Response Approach to Measurement and Characterization of Radiographic Observer Performance.” Journal Article. In <em>American Journal of Roentgenology</em>, 130:382–82. AMER ROENTGEN RAY SOC 1891 PRESTON WHITE DR, RESTON, VA 22091.</p>
</div>
<div id="ref-RN2680">
<p>Chakraborty, Dev P. 2017. <em>Observer Performance Methods for Diagnostic Imaging - Foundations, Modeling, and Applications with R-Based Examples</em>. Book. Boca Raton, FL: CRC Press.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#the-excel-data-format">The Excel data format</a></li>
      <li><a href="#the-truth-worksheet">The <code>Truth</code> worksheet</a></li>
      <li><a href="#the-structure-of-an-froc-dataset">The structure of an FROC dataset</a></li>
      <li><a href="#the-false-positive-fp-ratings">The false positive (FP) ratings</a></li>
      <li><a href="#the-true-positive-tp-ratings">The true positive (TP) ratings</a></li>
      <li><a href="#summary">Summary</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Dev Chakraborty, Peter Philips, Xuetong Zhai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
